(window.webpackJsonp=window.webpackJsonp||[]).push([["npm.dom-to-image"],{"70b0":function(e,t,n){function r(e){return(e=/\.([^\.\/]*?)$/g.exec(e))?e[1]:""}function o(e,t){return e=window.getComputedStyle(e).getPropertyValue(t),parseFloat(e.replace("px",""))}function i(e){return-1!==e.search(p)}function u(e){for(var t,n=[];null!==(t=p.exec(e));)n.push(t[1]);return n.filter((function(e){return!d.isDataUrl(e)}))}function a(e,t,n,r){return Promise.resolve(t).then((function(e){return n?d.resolveUrl(e,n):e})).then(r||d.getAndEncode).then((function(e){return d.dataAsUrl(e,d.mimeType(t))})).then((function(n){return e.replace(new RegExp("(url\\(['\"]?)("+d.escape(t)+")(['\"]?\\))","g"),"$1"+n+"$3")}))}function c(){return Promise.resolve(d.asArray(document.styleSheets)).then((function(e){var t=[];return e.forEach((function(e){try{d.asArray(e.cssRules||[]).forEach(t.push.bind(t))}catch(e){}})),t})).then((function(e){return e.filter((function(e){return e.type===CSSRule.FONT_FACE_RULE})).filter((function(e){return g.shouldProcess(e.style.getPropertyValue("src"))}))})).then((function(t){return t.map(e)}));function e(e){return{resolve:function(){var t=(e.parentStyleSheet||{}).href;return g.inlineAll(e.cssText,t)},src:function(){return e.style.getPropertyValue("src")}}}}function l(e){return{inline:function(t){return d.isDataUrl(e.src)?Promise.resolve():Promise.resolve(e.src).then(t||d.getAndEncode).then((function(t){return d.dataAsUrl(t,d.mimeType(e.src))})).then((function(t){return new Promise((function(n,r){e.onload=n,e.onerror=r,e.src=t}))}))}}}function s(e,t){var n=t=t||{};return void 0===n.imagePlaceholder?P.impl.options.imagePlaceholder=y.imagePlaceholder:P.impl.options.imagePlaceholder=n.imagePlaceholder,void 0===n.cacheBust?P.impl.options.cacheBust=y.cacheBust:P.impl.options.cacheBust=n.cacheBust,Promise.resolve(e).then((function(e){return function e(t,n,r){return r||!n||n(t)?Promise.resolve(t).then((function(e){return e instanceof HTMLCanvasElement?d.makeImage(e.toDataURL()):e.cloneNode(!1)})).then((function(r){return function(t,n,r){return 0===(t=t.childNodes).length?Promise.resolve(n):function(t,n,r){var o=Promise.resolve();return n.forEach((function(n){o=o.then((function(){return e(n,r)})).then((function(e){e&&t.appendChild(e)}))})),o}(n,d.asArray(t),r).then((function(){return n}))}(t,r,n)})).then((function(e){return function(e,t){return t instanceof Element?Promise.resolve().then((function(){!function(e,t){e.cssText?t.cssText=e.cssText:function(e,t){d.asArray(e).forEach((function(n){t.setProperty(n,e.getPropertyValue(n),e.getPropertyPriority(n))}))}(e,t)}(window.getComputedStyle(e),t.style)})).then((function(){[":before",":after"].forEach((function(n){!function(n){var r,o=window.getComputedStyle(e,n),i=o.getPropertyValue("content");""!==i&&"none"!==i&&(i=d.uid(),t.className=t.className+" "+i,(r=document.createElement("style")).appendChild(function(e,t,n){return e="."+e+":"+t,t=(n.cssText?function(e){var t=e.getPropertyValue("content");return e.cssText+" content: "+t+";"}:function(e){return d.asArray(e).map((function(t){return t+": "+e.getPropertyValue(t)+(e.getPropertyPriority(t)?" !important":"")})).join("; ")+";"})(n),document.createTextNode(e+"{"+t+"}")}(i,n,o)),t.appendChild(r))}(n)}))})).then((function(){e instanceof HTMLTextAreaElement&&(t.innerHTML=e.value),e instanceof HTMLInputElement&&t.setAttribute("value",e.value)})).then((function(){t instanceof SVGElement&&(t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t instanceof SVGRectElement)&&["width","height"].forEach((function(e){var n=t.getAttribute(e);n&&t.style.setProperty(e,n)}))})).then((function(){return t})):t}(t,e)})):Promise.resolve()}(e,t.filter,!0)})).then(h).then(m).then((function(e){return t.bgcolor&&(e.style.backgroundColor=t.bgcolor),t.width&&(e.style.width=t.width+"px"),t.height&&(e.style.height=t.height+"px"),t.style&&Object.keys(t.style).forEach((function(n){e.style[n]=t.style[n]})),e})).then((function(n){return n=n,r=t.width||d.width(e),o=t.height||d.height(e),Promise.resolve(n).then((function(e){return e.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(e)})).then(d.escapeXhtml).then((function(e){return'<foreignObject x="0" y="0" width="100%" height="100%">'+e+"</foreignObject>"})).then((function(e){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+r+'" height="'+o+'">'+e+"</svg>"})).then((function(e){return"data:image/svg+xml;charset=utf-8,"+e}));var r,o}))}function f(e,t){return s(e,t).then(d.makeImage).then(d.delay(100)).then((function(n){var r=function(e){var n=document.createElement("canvas");return n.width=t.width||d.width(e),n.height=t.height||d.height(e),t.bgcolor&&((e=n.getContext("2d")).fillStyle=t.bgcolor,e.fillRect(0,0,n.width,n.height)),n}(e);return r.getContext("2d").drawImage(n,0,0),r}))}function h(e){return v.resolveAll().then((function(t){var n=document.createElement("style");return e.appendChild(n),n.appendChild(document.createTextNode(t)),e}))}function m(e){return w.inlineAll(e).then((function(){return e}))}var d,p,g,v,w,y,P;d={escape:function(e){return e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:r,mimeType:function(e){return e=r(e).toLowerCase(),function(){var e="application/font-woff",t="image/jpeg";return{woff:e,woff2:e,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:t,jpeg:t,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[e]||""},dataAsUrl:function(e,t){return"data:"+t+";base64,"+e},isDataUrl:function(e){return-1!==e.search(/^(data:)/)},canvasToBlob:function(e){var t;return e.toBlob?new Promise((function(t){e.toBlob(t)})):(t=e,new Promise((function(e){for(var n=window.atob(t.toDataURL().split(",")[1]),r=n.length,o=new Uint8Array(r),i=0;i<r;i++)o[i]=n.charCodeAt(i);e(new Blob([o],{type:"image/png"}))})))},resolveUrl:function(e,t){var n=document.implementation.createHTMLDocument(),r=n.createElement("base"),o=(n.head.appendChild(r),n.createElement("a"));return n.body.appendChild(o),r.href=t,o.href=e,o.href},getAndEncode:function(e){return P.impl.options.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime()),new Promise((function(t){var n,r,o=new XMLHttpRequest;function i(){t("")}o.onreadystatechange=function(){var e;4===o.readyState&&(200!==o.status?n?t(n):i(o.status):((e=new FileReader).onloadend=function(){var n=e.result.split(/,/)[1];t(n)},e.readAsDataURL(o.response)))},o.ontimeout=function(){n?t(n):i()},o.responseType="blob",o.timeout=3e4,o.open("GET",e,!0),o.send(),P.impl.options.imagePlaceholder&&(r=P.impl.options.imagePlaceholder.split(/,/))&&r[1]&&(n=r[1])}))},uid:function(){var e=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+e++}}(),delay:function(e){return function(t){return new Promise((function(n){setTimeout((function(){n(t)}),e)}))}},asArray:function(e){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t},escapeXhtml:function(e){return e.replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){t(r)},r.onerror=n,r.src=e}))},width:function(e){var t=o(e,"border-left-width"),n=o(e,"border-right-width");return e.scrollWidth+t+n},height:function(e){var t=o(e,"border-top-width"),n=o(e,"border-bottom-width");return e.scrollHeight+t+n}},y={imagePlaceholder:void 0,cacheBust:!(p=/url\(['"]?([^'"]+?)['"]?\)/g)},P={toSvg:s,toPng:function(e,t){return f(e,t||{}).then((function(e){return e.toDataURL()}))},toJpeg:function(e,t){return f(e,t=t||{}).then((function(e){return e.toDataURL("image/jpeg",t.quality||1)}))},toBlob:function(e,t){return f(e,t||{}).then(d.canvasToBlob)},toPixelData:function(e,t){return f(e,t||{}).then((function(t){return t.getContext("2d").getImageData(0,0,d.width(e),d.height(e)).data}))},impl:{fontFaces:v={resolveAll:function(){return c(document).then((function(e){return Promise.all(e.map((function(e){return e.resolve()})))})).then((function(e){return e.join("\n")}))},impl:{readAll:c}},images:w={inlineAll:function e(t){return t instanceof Element?function(e){var t=e.style.getPropertyValue("background");return t?g.inlineAll(t).then((function(t){e.style.setProperty("background",t,e.style.getPropertyPriority("background"))})).then((function(){return e})):Promise.resolve(e)}(t).then((function(){return t instanceof HTMLImageElement?l(t).inline():Promise.all(d.asArray(t.childNodes).map((function(t){return e(t)})))})):Promise.resolve(t)},impl:{newImage:l}},util:d,inliner:g={inlineAll:function(e,t,n){return i(e)?Promise.resolve(e).then(u).then((function(r){var o=Promise.resolve(e);return r.forEach((function(e){o=o.then((function(r){return a(r,e,t,n)}))})),o})):Promise.resolve(e)},shouldProcess:i,impl:{readUrls:u,inline:a}},options:{}}},e.exports=P}}]);